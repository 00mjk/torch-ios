PROJECT("torch-pkg")

CMAKE_MINIMUM_REQUIRED(VERSION 2.6 FATAL_ERROR)
CMAKE_POLICY(VERSION 2.6)

FIND_PACKAGE(Wget)
IF(NOT WGET_FOUND)
	FIND_PACKAGE(Curl)
ENDIF(NOT WGET_FOUND)
FIND_PACKAGE(Git)

IF((WGET_FOUND OR CURL_FOUND) AND GIT_FOUND)

	CONFIGURE_FILE(torch-pkg.in "${Torch_BINARY_DIR}/torch-pkg")
	
	INSTALL(PROGRAMS "${Torch_BINARY_DIR}/torch-pkg"
	        DESTINATION "${Torch_INSTALL_BIN_SUBDIR}")

ELSE((WGET_FOUND OR CURL_FOUND) AND GIT_FOUND)

	MESSAGE(FATAL_ERROR "Downloader (wget/curl or git) not found")

ENDIF((WGET_FOUND OR CURL_FOUND) AND GIT_FOUND)
